# Angzarr Server Configuration Example
# Copy to config.yaml and customize for your environment
#
# Environment variable overrides: ANGZARR_<SECTION>__<KEY>
# Example: ANGZARR_STORAGE__TYPE=postgres

# =============================================================================
# Storage Configuration
# =============================================================================
storage:
  type: sqlite
  sqlite:
    path: ./data/events.db
  # For in-memory SQLite, omit the path:
  # sqlite: {}

  # PostgreSQL (production):
  # type: postgres
  # postgres:
  #   uri: postgres://localhost:5432/angzarr

  # MongoDB:
  # type: mongodb
  # mongodb:
  #   uri: mongodb://localhost:27017
  #   database: angzarr

# =============================================================================
# Transport Configuration
# =============================================================================
transport:
  type: tcp  # "tcp" for network, "uds" for local IPC
  tcp:
    host: 0.0.0.0
    port: 50051
  # Unix domain sockets (standalone mode):
  # type: uds
  # uds:
  #   base_path: /tmp/angzarr

# =============================================================================
# Server Configuration (legacy - prefer transport section)
# =============================================================================
server:
  aggregate_port: 1313
  event_query_port: 1314
  host: 0.0.0.0

# =============================================================================
# Messaging Configuration
# =============================================================================
# messaging:
#   type: amqp
#   amqp:
#     url: amqp://localhost:5672
#     domain: customers  # Single domain (for aggregate mode)
#     # domains:         # Multiple domains (for projector/saga modes)
#     #   - customers
#     #   - orders
#
#   # Kafka:
#   # type: kafka
#   # kafka:
#   #   bootstrap_servers: localhost:9092
#   #   topic_prefix: angzarr
#   #   group_id: my-consumer
#   #   domains:
#   #     - customers
#   #     - orders
#
#   # In-memory channel (standalone mode):
#   # type: channel

# =============================================================================
# Service Discovery & Endpoints
# =============================================================================

# Target service (sidecar mode)
# target:
#   address: localhost:50051
#   domain: orders

# client logic services (gateway mode)
# client_logic:
#   - domain: orders
#     address: localhost:50051
#   - domain: inventory
#     address: localhost:50052

# Projector endpoints
# projectors:
#   - name: ui_projector
#     address: localhost:60001
#     synchronous: false
#   - name: reporting
#     address: localhost:60002
#     synchronous: true

# Saga endpoints
# sagas:
#   - name: order_saga
#     address: localhost:70001
#     synchronous: false
