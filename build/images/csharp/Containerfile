# syntax=docker/dockerfile:1.4
# C# build image for angzarr
#
# Build: podman build -t ghcr.io/angzarr-io/angzarr-csharp .
#
# Provides: .NET SDK 8.0
# Based on: ghcr.io/angzarr-io/angzarr-base

ARG BASE_IMAGE=ghcr.io/angzarr-io/angzarr-base:latest
FROM ${BASE_IMAGE}

ARG DOTNET_VERSION=8.0

# Install .NET SDK
# Microsoft package repo + SDK
RUN apt-get update && apt-get install -y --no-install-recommends \
    wget \
    && wget https://packages.microsoft.com/config/debian/12/packages-microsoft-prod.deb -O /tmp/packages-microsoft-prod.deb \
    && dpkg -i /tmp/packages-microsoft-prod.deb \
    && rm /tmp/packages-microsoft-prod.deb \
    && apt-get update \
    && apt-get install -y --no-install-recommends \
        dotnet-sdk-${DOTNET_VERSION} \
    && rm -rf /var/lib/apt/lists/*

# Disable telemetry
ENV DOTNET_CLI_TELEMETRY_OPTOUT=1 \
    DOTNET_NOLOGO=1

# Verify installation
RUN dotnet --version

WORKDIR /workspace
