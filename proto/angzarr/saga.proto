syntax = "proto3";
package angzarr;
option go_package = "github.com/angzarr/angzarr/proto/angzarr";
option java_package = "dev.angzarr";
option java_multiple_files = true;

import "angzarr/types.proto";

// Saga: business logic that coordinates across aggregates
// Two-phase protocol: Prepare (declare destinations) â†’ Execute (with fetched state)
service Saga {
  // Phase 1: Saga declares which destination aggregates it needs
  rpc Prepare (SagaPrepareRequest) returns (SagaPrepareResponse);
  // Phase 2: Execute with source + fetched destination state
  rpc Execute (SagaExecuteRequest) returns (SagaResponse);
}
