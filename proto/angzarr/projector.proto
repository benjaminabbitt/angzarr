syntax = "proto3";
package angzarr;
option go_package = "github.com/angzarr/angzarr/proto/angzarr";
option java_package = "dev.angzarr";
option java_multiple_files = true;

import "angzarr/types.proto";
import "google/protobuf/empty.proto";

// Projector: business logic that projects events to read models
// Business logic doesn't care about sync - coordinator decides
service Projector {
  rpc Handle (EventBook) returns (Projection);
}

// ProjectorCoordinator: orchestrates projection processing
service ProjectorCoordinator {
  // Sync processing - returns projection based on sync_mode
  rpc HandleSync (SyncEventBook) returns (Projection);
  // Async processing - fire and forget
  rpc Handle (EventBook) returns (google.protobuf.Empty);
}
