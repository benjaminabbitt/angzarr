apiVersion: v1
kind: ConfigMap
metadata:
  name: angzarr-config
  namespace: angzarr
data:
  config.yaml: |
    # NOTE: For per-language deployment, use language-specific configs in
    # examples/{rust,go,python}/k8s/angzarr-config.yaml instead.
    # This config is for multi-language deployment (all projectors active).
    storage:
      type: mongodb
      path: placeholder  # Will be overridden by STORAGE_PATH env var
      database: angzarr

    server:
      command_handler_port: 50051
      event_query_port: 50052
      host: 0.0.0.0

    business_logic:
      - domain: customer
        address: rs-customer:50100
      - domain: transaction
        address: rs-transaction:50101

    projectors:
      - name: receipt
        address: rs-projector-receipt:50103
        synchronous: true
      - name: rs-log-customer
        address: rs-projector-log-customer:50104
        synchronous: false
      - name: rs-log-transaction
        address: rs-projector-log-transaction:50105
        synchronous: false
      - name: go-log-customer
        address: go-projector-log-customer:50204
        synchronous: false
      - name: go-log-transaction
        address: go-projector-log-transaction:50205
        synchronous: false
      - name: py-log-customer
        address: py-projector-log-customer:50304
        synchronous: false
      - name: py-log-transaction
        address: py-projector-log-transaction:50305
        synchronous: false

    sagas:
      - name: saga-loyalty
        address: rs-saga-loyalty:50102
        synchronous: false
