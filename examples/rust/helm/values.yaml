# Rust example services for Angzarr

namespace: angzarr-rs

# Angzarr infrastructure images
angzarr:
  command:
    image: angzarr-entity:latest
    port: 50051
  query:
    port: 50052
  stream:
    image: angzarr-stream:latest
    port: 1315
  gateway:
    image: angzarr-gateway:latest
    port: 1316
    streamTimeoutSecs: 30

# Business logic services
services:
  customer:
    image: rs-customer:latest
    port: 50100
    domain: customer
  transaction:
    image: rs-transaction:latest
    port: 50101
    domain: transaction

# Projector services
projectors:
  receipt:
    image: rs-projector-receipt:latest
    port: 50200
  logCustomer:
    image: rs-projector-log-customer:latest
    port: 50201
  logTransaction:
    image: rs-projector-log-transaction:latest
    port: 50202

# Saga services
sagas:
  loyalty:
    image: rs-saga-loyalty:latest
    port: 50300

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: "GRPC"
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
  hosts:
    command: command.rs.angzarr.local
    query: query.rs.angzarr.local
    gateway: gateway.rs.angzarr.local

# Secrets (values should be provided via --set or external secrets)
secrets:
  # MongoDB connection
  mongodbUri: ""
  # RabbitMQ AMQP URL
  amqpUrl: ""

# Logging
logging:
  level: info
