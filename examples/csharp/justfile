# C# examples
# Container: podman build -t angzarr-dev-csharp -f examples/csharp/Containerfile.dev .
# Run:       podman run --rm -v .:/app:Z -w /app/examples/csharp angzarr-dev-csharp just test

set shell := ["bash", "-c"]

TOP := `git rev-parse --show-toplevel`

# Show available commands
default:
    @just --list

# Build dev container
container-build:
    cd {{TOP}} && podman build -t angzarr-dev-csharp -f examples/csharp/Containerfile.dev .

# Run tests in container
container-test:
    cd {{TOP}} && podman run --rm -v .:/app:Z -w /app/examples/csharp angzarr-dev-csharp just test

# Build all projects
build:
    dotnet build Evented.Examples.sln

# Run tests
test:
    dotnet test Evented.Examples.sln

# Clean all projects
clean:
    dotnet clean Evented.Examples.sln
    find . -type d -name bin -exec rm -rf {} + 2>/dev/null || true
    find . -type d -name obj -exec rm -rf {} + 2>/dev/null || true

# Restore dependencies
restore:
    dotnet restore Evented.Examples.sln

# Format all C# code
fmt:
    dotnet format Evented.Examples.sln

# Lint all C# code (verify formatting)
lint:
    dotnet format Evented.Examples.sln --verify-no-changes

# Lint Helm chart
helm-lint:
    helm lint helm
