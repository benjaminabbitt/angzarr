# TypeScript dev container for running tests
# Build: podman build -t angzarr-dev-typescript -f examples/typescript/Containerfile.dev .
# Run:   podman run --rm -v .:/app:Z -w /app/examples/typescript angzarr-dev-typescript just test

FROM node:22-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
    git \
    curl \
    ca-certificates \
    && rm -rf /var/lib/apt/lists/*

# Install just
RUN curl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to /usr/local/bin

ENV PATH="/usr/local/bin:${PATH}"

WORKDIR /app

# Copy generated proto files if they exist
# COPY generated/typescript /app/generated/typescript

WORKDIR /app/examples/typescript

CMD ["just", "test"]
