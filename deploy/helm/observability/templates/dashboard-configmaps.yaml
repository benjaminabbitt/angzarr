{{- if .Values.dashboards.enabled }}
{{- range $name, $dashboard := .Values.dashboards.files }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ $.Release.Name }}-dashboard-{{ $name }}
  namespace: {{ $.Release.Namespace }}
  labels:
    {{- include "observability.labels" $ | nindent 4 }}
    grafana_dashboard: "1"
data:
  {{ $name }}.json: |-
{{ $.Files.Get (printf "dashboards/%s.json" $name) | indent 4 }}
{{- end }}
{{- end }}
