---
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Projector Examples

Read-side projectors from the poker domain. All code is from the actual [examples/](https://github.com/benjaminabbitt/angzarr/tree/main/examples) directory.

Projectors subscribe to events and produce read-optimized views: text logs, database tables, search indexes, or external API calls.

---

## Implementation Styles

Angzarr supports two projector implementation styles:

| Style | Description | Best For |
|-------|-------------|----------|
| **OO (Object-Oriented)** | Projector class with `@projects`/`[Projects]` decorators | Rich state, encapsulation |
| **Functional** | StateRouter or ProjectorHandler with function handlers | Simple projections, stateless transforms |

| Language | OO | Functional |
|----------|:--:|:----------:|
| Python | ✓ | ✓ |
| C# | ✓ | ✓ |
| Rust | ✓ | ✓ |
| Java | ✓ | ✓ |
| Go | ✓ | ✓ |
| C++ | — | ✓ |

---

## Output Projector

The **Output Projector** subscribes to events from multiple domains (player, table, hand) and writes formatted game logs to a file. This demonstrates a **multi-domain projector**.

<Tabs groupId="language">
<TabItem value="python-oo" label="Python OO" default>

**[`examples/python/prj-output-oo/main.py`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/python/prj-output-oo/main.py)**

```python file=../../../../../examples/python/prj-output-oo/main.py start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="python" label="Python Functional">

**[`examples/python/prj-output/projector.py`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/python/prj-output/projector.py)**

```python file=../../../../../examples/python/prj-output/projector.py start=docs:start:projector_functional end=docs:end:projector_functional
```

</TabItem>
<TabItem value="go-oo" label="Go OO">

**[`examples/go/prj-output-oo/main.go`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/go/prj-output-oo/main.go)**

```go file=../../../../../examples/go/prj-output-oo/main.go start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="go" label="Go Functional">

**[`examples/go/prj-output/main.go`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/go/prj-output/main.go)**

```go file=../../../../../examples/go/prj-output/main.go start=docs:start:projector_functional end=docs:end:projector_functional
```

</TabItem>
<TabItem value="rust-oo" label="Rust OO">

**[`examples/rust/prj-output-oo/src/main.rs`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/rust/prj-output-oo/src/main.rs)**

```rust file=../../../../../examples/rust/prj-output-oo/src/main.rs start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="rust" label="Rust Functional">

**[`examples/rust/prj-output/src/main.rs`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/rust/prj-output/src/main.rs)**

```rust file=../../../../../examples/rust/prj-output/src/main.rs start=docs:start:projector_functional end=docs:end:projector_functional
```

</TabItem>
<TabItem value="java-oo" label="Java OO">

**[`examples/java/prj-output-oo/src/main/java/dev/angzarr/examples/prjoutputoo/OutputProjector.java`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/java/prj-output-oo/src/main/java/dev/angzarr/examples/prjoutputoo/OutputProjector.java)**

```java file=../../../../../examples/java/prj-output-oo/src/main/java/dev/angzarr/examples/prjoutputoo/OutputProjector.java start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="java" label="Java Functional">

**[`examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputProjector.java`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputProjector.java)**

```java file=../../../../../examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputProjector.java start=docs:start:projector_functional end=docs:end:projector_functional
```

</TabItem>
<TabItem value="csharp" label="C# OO">

**[`examples/csharp/Prj/Output/OutputProjector.cs`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/csharp/Prj/Output/OutputProjector.cs)**

```csharp file=../../../../../examples/csharp/Prj/Output/OutputProjector.cs start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="cpp" label="C++">

**[`examples/cpp/prj-output/src/main.cpp`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/cpp/prj-output/src/main.cpp)**

```cpp file=../../../../../examples/cpp/prj-output/src/main.cpp start=docs:start:projector_functional end=docs:end:projector_functional
```

</TabItem>
</Tabs>

---

## StateRouter Pattern

The **StateRouter** pattern provides fluent event handler registration with explicit state management. It's the functional alternative to OO projectors:

<Tabs groupId="language">
<TabItem value="python" label="Python" default>

**[`examples/python/prj-output/output_projector_doc.py`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/python/prj-output/output_projector_doc.py)**

```python file=../../../../../examples/python/prj-output/output_projector_doc.py start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="go" label="Go">

**[`examples/go/prj-output/output_projector_doc.go`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/go/prj-output/output_projector_doc.go)**

```go file=../../../../../examples/go/prj-output/output_projector_doc.go start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="rust" label="Rust">

**[`examples/rust/prj-output/src/output_projector_doc.rs`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/rust/prj-output/src/output_projector_doc.rs)**

```rust file=../../../../../examples/rust/prj-output/src/output_projector_doc.rs start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="java" label="Java">

**[`examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputStateRouter.java`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputStateRouter.java)**

```java file=../../../../../examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputStateRouter.java start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="csharp" label="C#">

**[`examples/csharp/Prj/Output/OutputProjector.cs`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/csharp/Prj/Output/OutputProjector.cs)**

```csharp file=../../../../../examples/csharp/Prj/Output/OutputProjector.cs start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="cpp" label="C++">

**[`examples/cpp/prj-output/src/output_projector_doc.cpp`](https://github.com/benjaminabbitt/angzarr/blob/main/examples/cpp/prj-output/src/output_projector_doc.cpp)**

```cpp file=../../../../../examples/cpp/prj-output/src/output_projector_doc.cpp start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
</Tabs>

---

## Multi-Domain Subscription

Projectors can subscribe to events from multiple domains. The `Output` projector subscribes to **player**, **table**, and **hand** domains:

```
player domain   ──┐
                  ├──→  [Output Projector]  ──→  hand_log.txt
table domain    ──┤
                  │
hand domain     ──┘
```

Each language's `ProjectorHandler`/`ProjectorBase` accepts multiple domain names:

<Tabs groupId="language">
<TabItem value="python" label="Python" default>

```python
handler = ProjectorHandler("output", "player", "table", "hand")
```

</TabItem>
<TabItem value="go" label="Go">

```go
handler := angzarr.NewProjectorHandler("output", "player", "table", "hand")
```

</TabItem>
<TabItem value="rust" label="Rust">

```rust
let handler = ProjectorHandler::new("output", vec!["player", "table", "hand"]);
```

</TabItem>
<TabItem value="java" label="Java">

```java
List<String> domains = List.of("player", "table", "hand");
ProjectorHandler handler = new ProjectorHandler("output", domains);
```

</TabItem>
</Tabs>

---

## Projector Principles

1. **Read-only** — Projectors never modify domain state, only create read views
2. **Idempotent** — Same events always produce same projections
3. **Catchup safe** — Can replay full event history to rebuild state
4. **Domain aware** — Subscribe to specific domains, filter unwanted events
5. **Stateful OK** — Can maintain local state (caches, maps) for rendering

---

## Running Projectors

### With ProjectorHandler (All Languages)

```bash
# Python
cd examples/python && python -m prj-output.main

# Go
cd examples/go && go run ./prj-output

# Rust
cd examples/rust && cargo run --bin prj-output

# Java
cd examples/java && ./gradlew prj-output:run

# C#
cd examples/csharp && dotnet run --project Prj/Output

# C++
cd examples/cpp && ./build/prj-output
```

---

## Next Steps

- **[Aggregates](/examples/aggregates)** — Command handling examples
- **[Sagas](/examples/sagas)** — Cross-domain coordination
- **[CloudEvents](/components/cloudevents)** — External event publishing
