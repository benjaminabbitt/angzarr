---
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Projectors

A **projector** subscribes to events and performs side effects—typically building read models, writing to databases, or streaming to external systems. Projectors transform the event stream into query-optimized views.

Unlike aggregates and sagas, projectors are **read-only** from the event sourcing perspective. They observe events but never emit commands back to aggregates.

---

## Common Use Cases

| Projector | Events | Output |
|-----------|--------|--------|
| Search indexer | Product events | Elasticsearch updates |
| Dashboard stream | All domain events | WebSocket push |
| Analytics ETL | Transaction events | Data warehouse |
| Cache warmer | Player events | Redis cache |
| Output renderer | Poker events | Console text |

---

## Example: Output Projector

Transforms poker events into human-readable text:

<Tabs groupId="language">
<TabItem value="python" label="Python" default>

```python file=examples/python/prj-output/output_projector_doc.py start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="go" label="Go">

```go file=examples/go/prj-output/output_projector_doc.go start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="rust" label="Rust">

```rust file=examples/rust/prj-output/src/output_projector_doc.rs start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="java" label="Java">

```java file=examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputProjectorDoc.java start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="csharp" label="C#">

```csharp file=examples/csharp/Prj/Output/OutputProjector.cs start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
<TabItem value="cpp" label="C++">

```cpp file=examples/cpp/prj-output/src/output_projector_doc.cpp start=docs:start:projector_oo end=docs:end:projector_oo
```

</TabItem>
</Tabs>

---

## StateRouter

Use the `StateRouter` to register event handlers:

<Tabs groupId="language">
<TabItem value="python" label="Python" default>

```python file=examples/python/prj-output/output_projector_doc.py start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="go" label="Go">

```go file=examples/go/prj-output/output_projector_doc.go start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="rust" label="Rust">

```rust file=examples/rust/prj-output/src/output_projector_doc.rs start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="java" label="Java">

```java file=examples/java/prj-output/src/main/java/dev/angzarr/examples/prjoutput/OutputStateRouter.java start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="csharp" label="C#">

```csharp file=examples/csharp/Prj/Output/OutputProjector.cs start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
<TabItem value="cpp" label="C++">

```cpp file=examples/cpp/prj-output/src/output_projector_doc.cpp start=docs:start:state_router end=docs:end:state_router
```

</TabItem>
</Tabs>

---

## Multi-Domain Projectors

Projectors **can** subscribe to events from multiple domains, but **should not** unless absolutely required:

```python
# Avoid this pattern when possible
router = StateRouter("prj-output")
    .subscribes("player", ["PlayerRegistered", "FundsDeposited"])
    .subscribes("table", ["PlayerJoined", "HandStarted"])
    .subscribes("hand", ["CardsDealt", "ActionTaken"])
```

**If you need multi-domain subscription, check your domain boundaries first.** Needing to join events across domains often indicates the domains are incorrectly partitioned. Consider whether those events belong in the same domain.

When multi-domain is truly necessary (e.g., a cross-cutting analytics view), it's technically safe because projectors only observe—but prefer single-domain projectors where possible for simpler reasoning and deployment.

---

## Synchronous vs Asynchronous

| Mode | Use Case | Behavior |
|------|----------|----------|
| **Async** (default) | Analytics, search indexing | Fire-and-forget |
| **Sync** | Read-after-write | Command waits for projector |

Synchronous projections enable CQRS patterns where commands must return updated read models.

---

## Position Tracking

Projectors track their position in the event stream to enable:
- **Catch-up**: Resume from last processed event after restart
- **Replay**: Rebuild read models from scratch

The framework manages position tracking automatically.

---

## Framework Projectors

Angzarr provides built-in projectors for common operational needs:

| Projector | Purpose | Output |
|-----------|---------|--------|
| **[LogService](/components/framework-projectors#logservice)** | Debug logging | Console |
| **[EventService](/components/framework-projectors#eventservice)** | Event storage | Database |
| **[StreamService](/components/framework-projectors#streamservice)** | Real-time streaming | gRPC |
| **[TopologyProjector](/components/framework-projectors#topologyprojector)** | Component graph | REST/Grafana |
| **[CloudEvents](/components/cloudevents)** | External publishing | HTTP/Kafka |

See **[Framework Projectors](/components/framework-projectors)** for details.

---

## Next Steps

- **[CloudEvents](/components/cloudevents)** — Publish events to external systems
- **[Framework Projectors](/components/framework-projectors)** — Built-in operational projectors
- **[Process Managers](/components/process-manager)** — Stateful multi-domain coordination
- **[Testing](/operations/testing)** — Testing projectors with Gherkin
